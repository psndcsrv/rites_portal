Students:
%div{:id=>dom_id_for(clazz,:students_container), :class=>"accordion_container"}
  %div{:id=>dom_id_for(clazz,:students_toggle), :class=>"accordion_toggle"}
  %div{:id=>dom_id_for(clazz,:students_content), :class=>"accordion_content"}
    = link_to 'Add Student', new_portal_student_path(:clazz_id => clazz.id)
    %table{:width=>"100%"}
      %tr
        %td
          Actions
        %td
          Student name
        %td
          Student login
        %td
          Grade level
      - clazz.students.compact.uniq.sort{|a,b| (a.user ? [a.first_name, a.last_name] : ["",""]) <=> (b.user ? [b.first_name, b.last_name] : ["",""])}.each do |student|
        %tr
          %td
            Remove | Edit
          %td
            = student.user.name
          %td
            = student.user.login
          %td
            = student.grade_level ? student.grade_level.name : "unknown"